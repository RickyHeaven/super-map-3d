define(["require","./arrayFill-69e0407a","./Check-1ab97039","./defaultValue-a9572088","./FeatureDetection-b832308f","./buildModuleUrl-0b6ed7f4","./Ellipsoid-a181f4f7","./Cartesian3-9e1fac2b","./Cartesian4-c70aabd2","./Cartographic-832093e6","./Color-d2102f41","./ComponentDatatype-00a8741a","./CompressedTextureBuffer-4ed44c37","./S3MEdgeProcessor-a8012007","./getStringFromTypedArray-240a4b70","./PrimitiveType-56cd8f05","./PixelFormat-62c40a90","./RuntimeError-7a3815c0","./S3MPixelFormat-30c58554","./IndexDatatype-42a29532","./BoundingRectangle-ef352e18","./pako_inflate-60a34f49","./createTaskProcessorWorker","./unzip-617dbdc5","./WebMercatorProjection-6eaad0a0","./GeographicTilingScheme-57db2937","./Math-42d8c121","./defer-027bcf35","./Rectangle-15196776","./Event-086a9f30","./WebGLConstants-ade65f0f"],(function(e,t,r,a,n,A,o,B,E,i,C,s,y,l,u,f,P,c,d,p,T,D,L,g,F,v,I,M,m,_,S){"use strict";function O(e,t,A){if(r.o.defined("array",e),a.e(t)&&r.o.typeOf.number("begin",t),a.e(A)&&r.o.typeOf.number("end",A),"function"==typeof e.slice)return e.slice(t,A);for(var o=Array.prototype.slice.call(e,t,A),B=n.s.typedArrayTypes,E=B.length,i=0;i<E;++i)if(e instanceof B[i]){o=new B[i](o);break}return o}var N,h=(N=!0,function(e,t){var r=N?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return N=!1,r}),R=h(void 0,(function(){return R.toString().search("(((.+)+)+)+$").toString().constructor(R).search("(((.+)+)+)+$")}));R();var b,G,U=Object.freeze({S3M:49,S3M4:1}),x=(b=!0,function(e,t){var r=b?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return b=!1,r}),K=x(void 0,(function(){return K.toString().search("(((.+)+)+)+$").toString().constructor(K).search("(((.+)+)+)+$")}));function H(){}function w(e,t,r){var n,A=e.num_points(),o=r.num_components(),B=new G.AttributeQuantizationTransform;if(B.InitFromAttribute(r)){for(var E=new Array(o),i=0;i<o;++i)E[i]=B.min_value(i);n={quantizationBits:B.quantization_bits(),minValues:E,range:B.range(),octEncoded:!1}}G.destroy(B),(B=new G.AttributeOctahedronTransform).InitFromAttribute(r)&&(n={quantizationBits:B.quantization_bits(),octEncoded:!0}),G.destroy(B);var C,y=A*o;C=a.e(n)?function(e,t,r,a,n){var A,o;a.quantizationBits<=8?(o=new G.DracoUInt8Array,A=new Uint8Array(n),t.GetAttributeUInt8ForAllPoints(e,r,o)):(o=new G.DracoUInt16Array,A=new Uint16Array(n),t.GetAttributeUInt16ForAllPoints(e,r,o));for(var B=0;B<n;++B)A[B]=o.GetValue(B);return G.destroy(o),A}(e,t,r,n,y):function(e,t,r,a){var n,A;switch(r.data_type()){case 1:case 11:A=new G.DracoInt8Array,n=new Int8Array(a),t.GetAttributeInt8ForAllPoints(e,r,A);break;case 2:A=new G.DracoUInt8Array,n=new Uint8Array(a),t.GetAttributeUInt8ForAllPoints(e,r,A);break;case 3:A=new G.DracoInt16Array,n=new Int16Array(a),t.GetAttributeInt16ForAllPoints(e,r,A);break;case 4:A=new G.DracoUInt16Array,n=new Uint16Array(a),t.GetAttributeUInt16ForAllPoints(e,r,A);break;case 5:case 7:A=new G.DracoInt32Array,n=new Int32Array(a),t.GetAttributeInt32ForAllPoints(e,r,A);break;case 6:case 8:A=new G.DracoUInt32Array,n=new Uint32Array(a),t.GetAttributeUInt32ForAllPoints(e,r,A);break;case 9:case 10:A=new G.DracoFloat32Array,n=new Float32Array(a),t.GetAttributeFloatForAllPoints(e,r,A)}for(var o=0;o<a;++o)n[o]=A.GetValue(o);return G.destroy(A),n}(e,t,r,y);var l=s.ComponentDatatype.fromTypedArray(C);if(s.ComponentDatatype.getSizeInBytes(l)*o%4!=0){var u=function(e,t,r){var a=t,n=s.ComponentDatatype.getSizeInBytes(r),A=n*t,o=4*Math.ceil(A/4)-A;a=t+o/n;var B,E=e.length/t,i=E*a;e instanceof Uint16Array?B=new Uint16Array(i):e instanceof Int16Array?B=new Int16Array(i):e instanceof Uint8Array?B=new Uint8Array(i):console.log("convertArrayToMutiple4Array dont support array type.");var C,y=0;for(y=0;y<E;y++)for(C=0;C<a;C++)B[y*a+C]=C<t?e[y*t+C]:0;return{numComponents:a,vertexArray:B}}(C,o,l);C=u.vertexArray,o=u.numComponents}return{array:C,data:{componentsPerAttribute:o,componentDatatype:l,byteOffset:r.byte_offset(),byteStride:s.ComponentDatatype.getSizeInBytes(l)*o,normalized:r.normalized(),quantization:n}}}K();var V=new B.o(40680631590769,40680631590769,40408299984661.445),Y=new B.o,J=new B.o;function k(e,t,r,n){var A=Math.cos(t);Y.x=A*Math.cos(e),Y.y=A*Math.sin(e),Y.z=Math.sin(t),Y=B.o.normalize(Y,Y),B.o.multiplyComponents(V,Y,J);var o=Math.sqrt(B.o.dot(Y,J));return J=B.o.divideByScalar(J,o,J),Y=B.o.multiplyByScalar(Y,r,Y),a.e(n)||(n=new B.o),B.o.add(J,Y,n)}var W=new f.y,Z=new f.y,X=new B.o,z=new i.a;function Q(e,t,r,n,A,C,y,u,P){var c=void 0,d=void 0,p=void 0,T=void 0,D=r.vertexAttributes,L=r.attrLocation;if(r.nCompressOptions=0,a.e(n.posUniqueID)&&n.posUniqueID>=0){a.e(P)||(r.nCompressOptions|=l.VertexCompressOption.SVC_Vertex);var g=t.GetAttribute(e,n.posUniqueID),F=w(e,t,g),v=F.data.componentsPerAttribute;r.verticesCount=F.array.length/v,r.vertCompressConstant=F.data.quantization.range/(1<<F.data.quantization.quantizationBits);var I=F.data.quantization.minValues;r.minVerticesValue=new E.e(I[0],I[1],I[2],1),v>3&&(r.minVerticesValue.w=I[3]);var M=r.verticesCount,m=C||y;if(m&&(c=new i.a,d=new i.a,p=new Float32Array(2*M),T=new Float64Array(2*M)),a.e(P)){var _=F.array,S=3===v?B.o.unpackArray(_):E.e.unpackArray(_);for(let e=0,t=S.length;e<t;e++){let t=S[e];B.o.multiplyByScalar(t,r.vertCompressConstant,t),B.o.add(t,r.minVerticesValue,t)}var O=f.y.multiply(P.sphereMatrix,P.geoMatrix,W),N=f.y.multiply(P.ellipsoidMatrix,P.geoMatrix,Z);f.y.inverse(N,N);var h=new o.t(6378137,6378137,6378137);for(let e=0,t=S.length;e<t;e++){let t=S[e];f.y.multiplyByPoint(O,t,X);let r=h.cartesianToCartographic(X,z);m&&(T[2*e]=r.longitude,T[2*e+1]=r.latitude,0===e?(c.longitude=r.longitude,c.latitude=r.latitude,d.longitude=r.longitude,d.latitude=r.latitude):(c.longitude=Math.max(r.longitude,c.longitude),c.latitude=Math.max(r.latitude,c.latitude),d.longitude=Math.min(r.longitude,d.longitude),d.latitude=Math.min(r.latitude,d.latitude)));let a=k(r.longitude,r.latitude,r.height,X);f.y.multiplyByPoint(N,a,t)}var R=new Array(3*S.length);3===v?B.o.packArray(S,R):E.e.packArray(S,R),F.array=new Float32Array(R),F.data.componentDatatype=s.ComponentDatatype.FLOAT,F.data.byteStride=4*v}if(L.aPosition=D.length,D.push({index:L.aPosition,typedArray:F.array,componentsPerAttribute:v,componentDatatype:F.data.componentDatatype,offsetInBytes:F.data.byteOffset,strideInBytes:F.data.byteStride,normalize:F.data.normalized}),!a.e(P)&&m)for(var b=new B.o,G=new B.o,U=new i.a,x=0;x<M;x++)f.y.multiplyByPoint(A,B.o.fromElements(F.array[3*x]*r.vertCompressConstant+I[0],F.array[3*x+1]*r.vertCompressConstant+I[1],F.array[3*x+2]*r.vertCompressConstant+I[2],b),G),U=i.a.fromCartesian(G),T[2*x]=U.longitude,T[2*x+1]=U.latitude,0===x?(c.longitude=U.longitude,c.latitude=U.latitude,d.longitude=U.longitude,d.latitude=U.latitude):(c.longitude=Math.max(U.longitude,c.longitude),c.latitude=Math.max(U.latitude,c.latitude),d.longitude=Math.min(U.longitude,d.longitude),d.latitude=Math.min(U.latitude,d.latitude));if(m){for(x=0;x<M;x++)p[2*x]=T[2*x]-d.longitude,p[2*x+1]=T[2*x+1]-d.latitude;L.aRelativeGeoCoord=D.length,D.push({index:L.aRelativeGeoCoord,typedArray:p,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),u.max=c,u.min=d}}if(a.e(n.normalUniqueID)&&n.normalUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_Normal;var K=t.GetAttribute(e,n.normalUniqueID),H=w(e,t,K),V=H.data.quantization;r.normalRangeConstant=(1<<V.quantizationBits)-1,L.aNormal=D.length,D.push({index:L.aNormal,typedArray:H.array,componentsPerAttribute:H.data.componentsPerAttribute,componentDatatype:H.data.componentDatatype,offsetInBytes:H.data.byteOffset,strideInBytes:H.data.byteStride,normalize:H.data.normalized})}if(a.e(n.colorUniqueID)&&n.colorUniqueID>=0){r.nCompressOptions|=l.VertexCompressOption.SVC_VertexColor;var Y=t.GetAttribute(e,n.colorUniqueID),J=w(e,t,Y),Q=J.array,j=J.data.componentDatatype,q=J.data.byteOffset,$=J.data.byteStride,ee=J.data.normalized;if(J.array instanceof Int32Array){Q=new Uint8Array(J.array.length);for(let e=0,t=J.array.length;e<t;e++)Q[e]=J.array[e];j=5121,q=0,$=4,ee=!0}L.aColor=D.length,D.push({index:L.aColor,typedArray:Q,componentsPerAttribute:J.data.componentsPerAttribute,componentDatatype:j,offsetInBytes:q,strideInBytes:$,normalize:ee})}for(x=0;x<n.texCoordUniqueIDs.length;x++){r.texCoordCompressConstant=[],r.minTexCoordValue=[];var te=n.texCoordUniqueIDs[x];if(!(te<0)){var re=t.GetAttribute(e,te),ae=w(e,t,re);if(a.e(ae.data.quantization)){r.nCompressOptions|=l.VertexCompressOption.SVC_TexutreCoord,r.texCoordCompressConstant.push(ae.data.quantization.range/(1<<ae.data.quantization.quantizationBits));I=ae.data.quantization.minValues;r.minTexCoordValue.push(new o.o(I[0],I[1]))}var ne="aTexCoord"+x;L[ne]=D.length,D.push({index:L[ne],typedArray:ae.array,componentsPerAttribute:ae.data.componentsPerAttribute,componentDatatype:ae.data.componentDatatype,offsetInBytes:ae.data.byteOffset,strideInBytes:ae.data.byteStride,normalize:ae.data.normalized}),r.textureCoordIsW=!0}}for(x=0;x<n.vertexAttrUniqueIDs.length;x++){var Ae=n.vertexAttrUniqueIDs[x];if(!(Ae<0)){var oe=t.GetAttribute(e,Ae),Be=w(e,t,oe);r.customAttributesArr.push({typedArray:Be.array,componentsPerAttribute:Be.data.componentsPerAttribute,componentDatatype:Be.data.componentDatatype,offsetInBytes:Be.data.byteOffset,strideInBytes:Be.data.byteStride,normalize:Be.data.normalized})}}}H.dracoDecodePointCloud=function(e,t,r,a,n){for(var A=new(G=e).Decoder,o=["POSITION","NORMAL","COLOR"],B=0;B<o.length;++B)A.SkipAttributeTransform(G[o[B]]);var E=new G.DecoderBuffer;if(E.Init(t,r),A.GetEncodedGeometryType(E)!==G.POINT_CLOUD)throw new c.t("Draco geometry type must be POINT_CLOUD.");var i=new G.PointCloud,C=A.DecodeBufferToPointCloud(E,i);if(!C.ok()||0===i.ptr)throw new c.t("Error decoding draco point cloud: "+C.error_msg());G.destroy(E),Q(i,A,a,n),G.destroy(i),G.destroy(A)},H.dracoDecodeMesh=function(e,t,r,a,n,A,o,B,E,i,C){for(var s=new(G=e).Decoder,y=["POSITION","NORMAL","COLOR","TEX_COORD"],l=0;l<y.length;++l)s.SkipAttributeTransform(G[y[l]]);var u=new G.DecoderBuffer;if(u.Init(t,r),s.GetEncodedGeometryType(u)!==G.TRIANGULAR_MESH)throw new c.t("Unsupported draco mesh geometry type.");var P=new G.Mesh;if(!s.DecodeBufferToMesh(u,P).ok()||0===P.ptr)return!1;G.destroy(u),Q(P,s,a,A,o,B,E,i,C);var d=function(e,t){for(var r=e.num_points(),a=e.num_faces(),n=new G.DracoInt32Array,A=3*a,o=p.IndexDatatype.createTypedArray(r,A),B=0,E=0;E<a;++E)t.GetFaceFromMesh(e,E,n),o[B+0]=n.GetValue(0),o[B+1]=n.GetValue(1),o[B+2]=n.GetValue(2),B+=3;var i=p.IndexDatatype.UNSIGNED_SHORT;return o instanceof Uint32Array&&(i=p.IndexDatatype.UNSIGNED_INT),G.destroy(n),{typedArray:o,numberOfIndices:A,indexDataType:i}}(P,s);n.indicesTypedArray=d.typedArray,n.indicesCount=d.numberOfIndices,n.indexType=d.indexDataType,n.primitiveType=f._0x4e53a2.TRIANGLES,G.destroy(P),G.destroy(s)};var j,q=(j=!0,function(e,t){var r=j?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return j=!1,r}),$=q(void 0,(function(){return $.toString().search("(((.+)+)+)+$").toString().constructor($).search("(((.+)+)+)+$")}));$();var ee,te=Object.freeze({OSGBFile:0,OSGBCacheFile:1,ClampGroundPolygon:2,ClampObjectPolygon:3,ClampGroundLine:4,ClampObjectLine:5,IconPoint:6,Text:7,PointCloudFile:8,ExtendRegion3D:9,ExtendClampPolygonCache:10,PolylineEffect:11,RegionEffect:12,ClampGroundAndObjectLineCache:13,ClampGroundRealtimeRasterCache:14}),re=(ee=!0,function(e,t){var r=ee?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return ee=!1,r}),ae=re(void 0,(function(){return ae.toString().search("(((.+)+)+)+$").toString().constructor(ae).search("(((.+)+)+)+$")}));function ne(){}function Ae(e){var t=new A.i,r=e.instanceBounds;if(!a.e(r))return t;var n=new B.o(r[0],r[1],r[2]),o=new B.o(r[3],r[4],r[5]),E=B.o.lerp(n,o,.5,new B.o),i=B.o.distance(E,n);return t.center=E,t.radius=i,t}function oe(e){var t,r,n=new A.i,o=new B.o,E=e.vertexAttributes[0],i=E.componentsPerAttribute,C=a.e(e.nCompressOptions)&&(e.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,s=1;C?(s=e.vertCompressConstant,t=new B.o(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),r=new Uint16Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/2)):r=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var y=[],u=0;u<e.verticesCount;u++)B.o.fromArray(r,i*u,o),C&&(o=B.o.multiplyByScalar(o,s,o),o=B.o.add(o,t,o)),y.push(B.o.clone(o));return A.i.fromPoints(y,n),y.length=0,n}function Be(e){var t,r,n=new A.i,o=new B.o,E=a.e(e.nCompressOptions)&&(e.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,i=e.vertexAttributes[0],C=i.componentsPerAttribute,s=1;E?(s=e.vertCompressConstant,r=new B.o(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),t=new Uint16Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/2)):t=new Float32Array(i.typedArray.buffer,i.typedArray.byteOffset,i.typedArray.byteLength/4);for(var y=[],u=0;u<e.verticesCount;u++)B.o.fromArray(t,C*u,o),E&&(o=B.o.multiplyByScalar(o,s,o),o=B.o.add(o,r,o)),y.push(B.o.clone(o));return A.i.fromPoints(y,n),y.length=0,n}function Ee(e){var t,r,n=a.e(e.nCompressOptions)&&(e.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,o=new A.i,i=new B.o,C=new B.o,s=e.vertexAttributes[0],y=s.componentsPerAttribute,u=e.attrLocation.aPosition,f=e.vertexAttributes[u],P=e.attrLocation.aTexCoord5,c=e.vertexAttributes[P],d=c.componentsPerAttribute;n?(y=3,d=3,t=Ce(e,f),r=function(e,t,r){for(var a,n,A,o=t.componentsPerAttribute,B=e.texCoordCompressConstant[r],i=new E.e(e.minTexCoordValue[r].x,e.minTexCoordValue[r].y,e.minTexCoordValue[r].z,e.minTexCoordValue[r].w),C=new Uint16Array(t.typedArray.buffer,t.typedArray.byteOffset,t.typedArray.byteLength/2),s=new Float32Array(3*e.verticesCount),y=0;y<e.verticesCount;y++)a=C[o*y]*B+i.x,n=C[o*y+1]*B+i.y,A=C[o*y+2]*B+i.z,s[3*y]=a,s[3*y+1]=n,s[3*y+2]=A;return s}(e,c,5)):(t=new Float32Array(s.typedArray.buffer,s.typedArray.byteOffset,s.typedArray.byteLength/4),r=new Float32Array(c.typedArray.buffer,c.typedArray.byteOffset,c.typedArray.byteLength/4));for(var p=[],T=0;T<e.verticesCount;T++)B.o.fromArray(t,y*T,i),B.o.fromArray(r,d*T,C),B.o.add(i,C,i),p.push(B.o.clone(i));return A.i.fromPoints(p,o),p.length=0,o}function ie(e){var t=f._0x4e53a2.TRIANGLES;switch(e){case 1:t=f._0x4e53a2.POINTS;break;case 2:t=f._0x4e53a2.LINES;break;case 3:t=f._0x4e53a2.LINE_STRIP;break;case 4:t=f._0x4e53a2.TRIANGLES}return t}function Ce(e,t){for(var r,a,n,A=t.componentsPerAttribute,o=e.vertCompressConstant,E=new B.o(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),i=new Uint16Array(t.typedArray.buffer,t.typedArray.byteOffset,t.typedArray.byteLength/2),C=new Float32Array(3*e.verticesCount),s=0;s<e.verticesCount;s++)r=i[A*s]*o+E.x,a=i[A*s+1]*o+E.y,n=i[A*s+2]*o+E.z,C[3*s]=r,C[3*s+1]=a,C[3*s+2]=n;return C}ae(),ne.calcBoundingSphereInWorker=function(e,t){return t.instanceIndex>-1?Ae(t):a.e(t.clampRegionEdge)?Ee(t):e>=te.ClampGroundPolygon&&e<=te.ClampObjectLine?Be(t):e==te.ClampGroundAndObjectLineCache?Ee(t):oe(t)},ne.calcBoundingSphere=function(e,t,r){var n,o=e._fileType;return n=t.instanceIndex>-1?Ae(t):a.e(t.clampRegionEdge)?Ee(t):o>=te.ClampGroundPolygon&&o<=te.ClampObjectLine?Be(t):o==te.ClampGroundAndObjectLineCache?Ee(t):oe(t),A.i.transform(n,r,n),n},ne.calcBoundingRectangle=function(e,t){var r;return e._fileType===te.ClampGroundPolygon&&(r=function(e){var t,r,n=a.e(e.nCompressOptions)&&(e.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,A=new T.f,E=e.vertexAttributes[0],i=E.componentsPerAttribute,C=1;n?(C=e.vertCompressConstant,r=new B.o(e.minVerticesValue.x,e.minVerticesValue.y,e.minVerticesValue.z),t=new Uint16Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/2)):t=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var s=[],y=0;y<e.verticesCount;y++){var u=t[i*y],f=t[i*y+1];n&&(u=C*u+r.x,f=C*f+r.y),s.push(new o.o(u,f))}return T.f.fromPoints(s,A),s.length=0,A}(t)),r},ne.createEdge=function(e,t){if(!(t.length<1)){var r=function(e){for(var t=[],r=e.length,a=0;a<r;a++){var n=ie(e[a].primitiveType);(n===f._0x4e53a2.LINES||n===f._0x4e53a2.LINE_STRIP)&&t.push(e[a])}return t}(t);if(0!=r.length){var n,A=function(e){for(var t=0,r=e.length,a=0;a<r;a++){var n=e[a],A=ie(n.primitiveType);A==f._0x4e53a2.LINES?t+=n.indicesCount/2:A==f._0x4e53a2.LINE_STRIP&&t++}return t}(r),o=e.attrLocation.aPosition,E=e.vertexAttributes[o],i=a.e(e.nCompressOptions)&&(e.nCompressOptions&l.VertexCompressOption.SVC_Vertex)===l.VertexCompressOption.SVC_Vertex,C=E.componentsPerAttribute;i?(C=3,n=Ce(e,E)):n=new Float32Array(E.typedArray.buffer,E.typedArray.byteOffset,E.typedArray.byteLength/4);for(var y=function(e){for(var t=0,r=e.length,a=0;a<r;a++)t+=e[a].indicesCount;return t}(r),u=function(e,t,r){for(var a,n=[],A=r.length,o=0;o<A;o++){var E,i=r[o];E=0===i.indexType?new Uint16Array(i.indicesTypedArray.buffer,i.indicesTypedArray.byteOffset,i.indicesTypedArray.byteLength/2):new Uint32Array(i.indicesTypedArray.buffer,i.indicesTypedArray.byteOffset,i.indicesTypedArray.byteLength/4);var C=ie(i.primitiveType);if(C==f._0x4e53a2.LINES)for(a=0;a<i.indicesCount;a+=2){var s=[],y=new B.o;y.x=e[E[a]*t],y.y=e[E[a]*t+1],y.z=e[E[a]*t+2],s.push(y);var l=new B.o;l.x=e[E[a+1]*t],l.y=e[E[a+1]*t+1],l.z=e[E[a+1]*t+2],s.push(l),n.push(s)}else if(C==f._0x4e53a2.LINE_STRIP){for(s=[],a=0;a<i.indicesCount;a++){var u=new B.o;u.x=e[E[a]*t],u.y=e[E[a]*t+1],u.z=e[E[a]*t+2],s.push(u)}n.push(s)}}return n}(n,C,r),P=4*y-4*A,c=new Float32Array(3*P),d=new Float32Array(3*P),p=new Float32Array(3*P),T=new Int8Array(2*P),D=0,L=0;L<A;L++){for(var g=u[L].length,F=0;F<g;F++){var v=4*D-4*L,I=3*v+12*F,M=u[L][F];0!=F&&(c[I-6]=M.x,c[I-5]=M.y,c[I-4]=M.z,c[I-3]=M.x,c[I-2]=M.y,c[I-1]=M.z),F!=g-1&&(c[I]=M.x,c[I+1]=M.y,c[I+2]=M.z,c[I+3]=M.x,c[I+4]=M.y,c[I+5]=M.z);var m=M;F+1<g&&(m=u[L][F+1]),0!=F&&(p[I-6]=m.x,p[I-5]=m.y,p[I-4]=m.z,p[I-3]=m.x,p[I-2]=m.y,p[I-1]=m.z),F!=g-1&&(p[I]=m.x,p[I+1]=m.y,p[I+2]=m.z,p[I+3]=m.x,p[I+4]=m.y,p[I+5]=m.z);var _=M;F>=1&&(_=u[L][F-1]),0!=F&&(d[I-6]=_.x,d[I-5]=_.y,d[I-4]=_.z,d[I-3]=_.x,d[I-2]=_.y,d[I-1]=_.z),F!=g-1&&(d[I]=_.x,d[I+1]=_.y,d[I+2]=_.z,d[I+3]=_.x,d[I+4]=_.y,d[I+5]=_.z),I=2*v+8*F,0!=F&&(T[I-4]=-1,T[I-3]=-1,T[I-2]=1,T[I-1]=-1),F!=g-1&&(T[I]=-1,T[I+1]=1,T[I+2]=1,T[I+3]=1)}D+=u[L].length}var S={vertexAttributes:[],attrLocation:{}},O=S.vertexAttributes,N=S.attrLocation;S.instanceCount=0,S.instanceMode=0,N.aPosition=0,O.push({index:N.aPosition,typedArray:c,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aNormal=1,O.push({index:N.aNormal,typedArray:d,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord0=2,O.push({index:N.aTexCoord0,typedArray:p,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:3*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),N.aTexCoord1=3,O.push({index:N.aTexCoord1,typedArray:T,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:2*Int8Array.BYTES_PER_ELEMENT,normalize:!1});for(var h=[],R=0;R<u.length;R++)h.push(u[R].length);return{vertexPackage:S,indexPackage:function(e,t,r,a){var n,A={};A.indicesCount=6*(e-t),A.indexType=a>65535?1:0,A.primitiveType=f._0x4e53a2.TRIANGLES,n=0===A.indexType?new Uint16Array(A.indicesCount):new Uint32Array(A.indicesCount);for(var o=0,B=0;B<t;B++){for(var E=0;E<r[B]-1;E++)n[6*(o-B+E)]=4*(o-B+E),n[6*(o-B+E)+1]=4*(o-B+E)+2,n[6*(o-B+E)+2]=4*(o-B+E)+1,n[6*(o-B+E)+3]=4*(o-B+E)+1,n[6*(o-B+E)+4]=4*(o-B+E)+2,n[6*(o-B+E)+5]=4*(o-B+E)+3;o+=r[B]}return A.indicesTypedArray=n,A}(y,A,h,P)}}}};var se,ye=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var r="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";WebAssembly.validate(e)&&(r="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");var a,n=WebAssembly.instantiate(function(e){for(var r=new Uint8Array(e.length),a=0;a<e.length;++a){var n=e.charCodeAt(a);r[a]=n>96?n-71:n>64?n-65:n>47?n+4:n>46?63:62}var A=0;for(a=0;a<e.length;++a)r[A++]=r[a]<60?t[r[a]]:64*(r[a]-60)+r[++a];return r.buffer.slice(0,A)}(r),{}).then((function(e){(a=e.instance).exports.__wasm_call_ctors()}));function A(e,t,r,n,A,o){var B=a.exports.sbrk,E=r+3&-4,i=B(E*n),C=B(A.length),s=new Uint8Array(a.exports.memory.buffer);s.set(A,C);var y=e(i,r,n,C,A.length);if(0==y&&o&&o(i,E,n),t.set(s.subarray(i,i+r*n)),B(i-B(0)),0!=y)throw new Error("Malformed buffer data: "+y)}var o={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},B={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:n,supported:!0,decodeVertexBuffer:function(e,t,r,n,B){A(a.exports.meshopt_decodeVertexBuffer,e,t,r,n,a.exports[o[B]])},decodeIndexBuffer:function(e,t,r,n){A(a.exports.meshopt_decodeIndexBuffer,e,t,r,n)},decodeIndexSequence:function(e,t,r,n){A(a.exports.meshopt_decodeIndexSequence,e,t,r,n)},decodeGltfBuffer:function(e,t,r,n,E,i){A(a.exports[B[E]],e,t,r,n,a.exports[o[i]])}}}(),le=(se=!0,function(e,t){var r=se?function(){if(t){var r=t.apply(e,arguments);return t=null,r}}:function(){};return se=!1,r}),ue=le(void 0,(function(){return ue.toString().search("(((.+)+)+)+$").toString().constructor(ue).search("(((.+)+)+)+$")}));ue();var fe,Pe,ce=Object.freeze({Elevation:"VertexWeight",Intensity:"PointCloudIntensity",ClassCode:"ClassCode"}),de={MORPHING:0,COLUMBUS_VIEW:1,SCENE2D:2,SCENE3D:3,getMorphTime:function(e){return e===de.SCENE3D?1:e===de.MORPHING?void 0:0}},pe=Object.freeze(de),Te=!1,De=1,Le=2,ge={};ge[0]=P.PixelFormat.RGB_DXT1,ge[De]=P.PixelFormat.RGBA_DXT3,ge[Le]=P.PixelFormat.RGBA_DXT5;var Fe,ve=0,Ie=!1;function Me(e,t){var r=e.data,n=r.byteLength,A=new Uint8Array(r),o=Fe._malloc(n);!function(e,t,r,a){var n,A=r/4,o=a%4,B=new Uint32Array(e.buffer,0,(a-o)/4),E=new Uint32Array(t.buffer);for(n=0;n<B.length;n++)E[A+n]=B[n];for(n=a-o;n<a;n++)t[r+n]=e[n]}(A,Fe.HEAPU8,o,n);var B=Fe._crn_get_dxt_format(o,n),E=ge[B];if(!a.e(E))throw new c.t("Unsupported compressed format.");var i,C=Fe._crn_get_levels(o,n),s=Fe._crn_get_width(o,n),l=Fe._crn_get_height(o,n),u=0;for(i=0;i<C;++i)u+=P.PixelFormat.compressedTextureSizeInBytes(E,s>>i,l>>i);if(ve<u&&(a.e(fe)&&Fe._free(fe),fe=Fe._malloc(u),Pe=new Uint8Array(Fe.HEAPU8.buffer,fe,u),ve=u),Fe._crn_decompress(o,n,fe,u,0,C),Fe._free(o),a.u(e.bMipMap,!1)){var f=Pe.slice(0,u);return t.push(f.buffer),new y.e(E,s,l,f)}var d=P.PixelFormat.compressedTextureSizeInBytes(E,s,l),p=Pe.subarray(0,d),T=new Uint8Array(d);return T.set(p,0),t.push(T.buffer),new y.e(E,s,l,T)}var me,_e=1,Se=0,Oe=1,Ne=2,he=3,Re=0,be=1,Ge=2;new C.e;var Ue,xe=!1,Ke=!1,He=null;if(a.e(g.unzip)){g.unzip.onRuntimeInitialized=function(){xe=!0};var we=g.unzip.cwrap("unzip","number",["number","number","number","number"]),Ve=g.unzip.cwrap("freePointer",null,["number"])}const Ye=33776,Je=33779,ke=38e3,We=38001,Ze=38002,Xe=5e4;function ze(e){let t=d.S3MPixelFormat.NONE;switch(e){case Ye:case Je:t=d.S3MPixelFormat.BGRA;break;case ke:t=d.S3MPixelFormat.WEBP;break;case We:t=d.S3MPixelFormat.STANDARD_CRN;break;case Ze:t=d.S3MPixelFormat.KTX2;break;case Xe:t=d.S3MPixelFormat.CRN_DXT5;break;default:t=d.S3MPixelFormat.NONE}return t}function Qe(e,t,r,a,n,A){this.left=e,this.bottom=t,this.right=r,this.top=a,this.minHeight=n,this.maxHeight=A,this.width=r-e,this.length=a-t,this.height=A-n}function je(e,t,r){var a=r,n=e.getUint32(a,!0),A=a+=Uint32Array.BYTES_PER_ELEMENT,o=new Uint8Array(t,a,n);return{dataViewByteOffset:A,byteOffset:a+=n*Uint8Array.BYTES_PER_ELEMENT,buffer:o}}function qe(e,t,r,a){var n=e.getUint32(a+t,!0);a+=Uint32Array.BYTES_PER_ELEMENT;var A=r.subarray(a,a+n);return{string:u.a(A),bytesOffset:a+=n}}function $e(e,t,r,a,n,A){var o=r,B=e.getUint16(r+a,!0);o+=Uint16Array.BYTES_PER_ELEMENT,A||(o+=Uint16Array.BYTES_PER_ELEMENT);for(var E=0;E<B;E++){var i=e.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var C=e.getUint16(o+a,!0);if(o+=Uint16Array.BYTES_PER_ELEMENT,e.getUint16(o+a,!0),o+=Uint16Array.BYTES_PER_ELEMENT,20==C||35==C);else{var y=i*C*Float32Array.BYTES_PER_ELEMENT,l=t.subarray(o,o+y);o+=y;var u="aTexCoord"+E,f=n.vertexAttributes,P=n.attrLocation;P[u]=f.length,f.push({index:P[u],typedArray:l,componentsPerAttribute:C,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:C*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}}return{bytesOffset:o}}function et(e,t,r,a,n,A){var o=r,B=e.getUint16(o+a,!0);o+=Uint16Array.BYTES_PER_ELEMENT,o+=Uint16Array.BYTES_PER_ELEMENT;for(var E=n.vertexAttributes,i=n.attrLocation,C=0;C<B;C++){var y=e.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;var l=e.getUint16(o+a,!0);if(o+=Uint16Array.BYTES_PER_ELEMENT,16===l){o-=Uint16Array.BYTES_PER_ELEMENT;var u=3===A?Uint16Array.BYTES_PER_ELEMENT:Uint32Array.BYTES_PER_ELEMENT,f=y*(l*Float32Array.BYTES_PER_ELEMENT+u),P=t.subarray(o,o+f);o+=f;var c=new Uint8Array(Float32Array.BYTES_PER_ELEMENT*l*y);n.instanceCount=y,n.instanceMode=l,n.instanceBuffer=c,n.instanceIndex=1;for(var d=Float32Array.BYTES_PER_ELEMENT*l+u,p=0;p<y;p++){var T=p*d+u,D=P.subarray(T,T+d);c.set(D,p*(d-u))}L=16*Float32Array.BYTES_PER_ELEMENT,i.uv2=E.length,E.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),i.uv3=E.length,E.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv4=E.length,E.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.secondary_colour=E.length,E.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})}else{e.getUint16(o+a,!0),o+=Uint16Array.BYTES_PER_ELEMENT;f=y*l*Float32Array.BYTES_PER_ELEMENT;if(17===l||29===l){var L;c=t.subarray(o,o+f);n.instanceCount=y,n.instanceMode=l,n.instanceBuffer=c,n.instanceIndex=1,17===l?(L=17*Float32Array.BYTES_PER_ELEMENT,i.uv2=E.length,E.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1}),i.uv3=E.length,E.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv4=E.length,E.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.secondary_colour=E.length,E.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv6=E.length,E.push({index:i.uv6,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1})):29===l&&(L=29*Float32Array.BYTES_PER_ELEMENT,i.uv1=E.length,E.push({index:i.uv1,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:0,strideInBytes:L,instanceDivisor:1,byteLength:f}),i.uv2=E.length,E.push({index:i.uv2,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:4*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv3=E.length,E.push({index:i.uv3,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:8*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv4=E.length,E.push({index:i.uv4,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:12*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv5=E.length,E.push({index:i.uv5,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:16*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv6=E.length,E.push({index:i.uv6,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:20*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv7=E.length,E.push({index:i.uv7,componentsPerAttribute:3,componentDatatype:s.ComponentDatatype.FLOAT,normalize:!1,offsetInBytes:24*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.secondary_colour=E.length,E.push({index:i.secondary_colour,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:27*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}),i.uv9=E.length,E.push({index:i.uv9,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,normalize:!0,offsetInBytes:28*Float32Array.BYTES_PER_ELEMENT,strideInBytes:L,instanceDivisor:1}))}else{var g=y*l;n.instanceBounds=new Float32Array(g);for(var F=0;F<g;F++)n.instanceBounds[F]=e.getFloat32(o+a+F*Float32Array.BYTES_PER_ELEMENT,!0)}o+=f}}return{bytesOffset:o}}var tt=new B.o(40680631590769,40680631590769,40408299984661.445),rt=new B.o,at=new B.o;function nt(e,t,r,n){var A=Math.cos(t);rt.x=A*Math.cos(e),rt.y=A*Math.sin(e),rt.z=Math.sin(t),rt=B.o.normalize(rt,rt),B.o.multiplyComponents(tt,rt,at);var o=Math.sqrt(B.o.dot(rt,at));return at=B.o.divideByScalar(at,o,at),rt=B.o.multiplyByScalar(rt,r,rt),a.e(n)||(n=new B.o),B.o.add(at,rt,n)}var At=new B.o,ot=new i.a,Bt=new f.y,Et=new f.y;function it(e,t,r,n,A,C,y,l,u){var P=n,c=t.getUint32(P+r,!0);if(A.verticesCount=c,P+=Uint32Array.BYTES_PER_ELEMENT,c<=0)return{bytesOffset:P};var d=t.getUint16(P+r,!0);P+=Uint16Array.BYTES_PER_ELEMENT;var p=t.getUint16(P+r,!0);p=d*Float32Array.BYTES_PER_ELEMENT,P+=Uint16Array.BYTES_PER_ELEMENT;var T=c*d*Float32Array.BYTES_PER_ELEMENT,D=e.subarray(P,P+T);P+=T;var L=A.vertexAttributes,g=A.attrLocation,F=void 0,v=void 0;if(y||Te){F=new i.a,v=new i.a;var I=new Float32Array(2*c),M=new Float64Array(2*c);if(a.e(l)){var m=new Float32Array(D.byteLength/4),_=new Float32Array(D.buffer,D.byteOffset,D.byteLength/4);X=3===d?B.o.unpackArray(_):E.e.unpackArray(_);var S=f.y.multiply(l.sphereMatrix,l.geoMatrix,Bt),O=f.y.multiply(l.ellipsoidMatrix,l.geoMatrix,Et);f.y.inverse(O,O);for(var N=new o.t(6378137,6378137,6378137),h=0,R=0,b=X.length;R<b;R++){var G=X[R];f.y.multiplyByPoint(S,G,At);var U=nt((z=N.cartesianToCartographic(At,ot)).longitude,z.latitude,z.height,At);f.y.multiplyByPoint(O,U,G),3===d?(B.o.pack(G,m,h),h+=3):(E.e.pack(G,m,h),h+=4),M[2*R]=z.longitude,M[2*R+1]=z.latitude,0===R?(F.longitude=z.longitude,F.latitude=z.latitude,v.longitude=z.longitude,v.latitude=z.latitude):(F.longitude=Math.max(z.longitude,F.longitude),F.latitude=Math.max(z.latitude,F.latitude),v.longitude=Math.min(z.longitude,v.longitude),v.latitude=Math.min(z.latitude,v.latitude))}D=m}else for(var x=new B.o,K=new B.o,H=new Float32Array(D.buffer,D.byteOffset,D.byteLength/4),w=new i.a,V=0;V<c;V++)f.y.multiplyByPoint(C,B.o.fromElements(H[3*V],H[3*V+1],H[3*V+2],x),K),w=i.a.fromCartesian(K),M[2*V]=w.longitude,M[2*V+1]=w.latitude,0===V?(F.longitude=w.longitude,F.latitude=w.latitude,v.longitude=w.longitude,v.latitude=w.latitude):(F.longitude=Math.max(w.longitude,F.longitude),F.latitude=Math.max(w.latitude,F.latitude),v.longitude=Math.min(w.longitude,v.longitude),v.latitude=Math.min(w.latitude,v.latitude));var Y=Te?F.longitude-v.longitude:1,J=Te?F.latitude-v.latitude:1;for(V=0;V<c;V++)I[2*V]=(M[2*V]-v.longitude)/Y,I[2*V+1]=(M[2*V+1]-v.latitude)/J;g.aPosition=L.length,L.push({index:g.aPosition,typedArray:D,componentsPerAttribute:d,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:p,normalize:!1}),g.aRelativeGeoCoord=L.length,L.push({index:g.aRelativeGeoCoord,typedArray:I,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1})}else{if(3===d&&a.e(C)&&u){K=new B.o,H=new Float32Array(D.buffer,D.byteOffset,D.byteLength/4);for(var k=new Float32Array(D.byteLength/4+c),W=H.length,Z=(V=0,0);V<W;V+=3,Z+=4)k[Z]=H[V],k[Z+1]=H[V+1],k[Z+2]=H[V+2],f.y.multiplyByPoint(C,B.o.fromElements(k[Z],k[Z+1],k[Z+2],x),K),k[Z+3]=i.a.fromCartesian(K).height;D=k,p=(d=4)*Float32Array.BYTES_PER_ELEMENT}if(a.e(l)){var X;m=new Float32Array(D.byteLength/4),_=new Float32Array(D.buffer,D.byteOffset,D.byteLength/4);X=3===d?B.o.unpackArray(_):E.e.unpackArray(_);S=f.y.multiply(l.sphereMatrix,l.geoMatrix,Bt),O=f.y.multiply(l.ellipsoidMatrix,l.geoMatrix,Et);f.y.inverse(O,O);for(N=new o.t(6378137,6378137,6378137),h=0,R=0,b=X.length;R<b;R++){G=X[R];f.y.multiplyByPoint(S,G,At);var z;U=nt((z=N.cartesianToCartographic(At,ot)).longitude,z.latitude,z.height,At);f.y.multiplyByPoint(O,U,G),3===d?(B.o.pack(G,m,h),h+=3):(E.e.pack(G,m,h),h+=4)}D=m}g.aPosition=L.length,L.push({index:g.aPosition,typedArray:D,componentsPerAttribute:d,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:p,normalize:!1})}return{bytesOffset:P,cartographicBounds:{max:F,min:v}}}function Ct(e,t,r,a,n,A){var o=a,B=t.getUint32(o+r,!0);if(o+=Uint32Array.BYTES_PER_ELEMENT,B<=0)return{bytesOffset:o};var E=t.getUint16(o+r,!0);o+=Uint16Array.BYTES_PER_ELEMENT;var i=t.getUint16(o+r,!0);o+=Uint16Array.BYTES_PER_ELEMENT;var C=B*E*Float32Array.BYTES_PER_ELEMENT,y=e.subarray(o,o+C);let l=new Float32Array(y.buffer,y.byteOffset,3);o+=C;let u=A!==te.Text&&0===l[0]&&0===l[1]&&0===l[2];if(!n.ignoreNormal&&!u){var f=n.vertexAttributes,P=n.attrLocation;P.aNormal=f.length,f.push({index:P.aNormal,typedArray:y,componentsPerAttribute:E,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:i,normalize:!1})}return{bytesOffset:o}}const st={0:Uint32Array.BYTES_PER_ELEMENT,1:Float32Array.BYTES_PER_ELEMENT,2:Float64Array.BYTES_PER_ELEMENT,3:Uint16Array.BYTES_PER_ELEMENT,4:Uint8Array.BYTES_PER_ELEMENT},yt={0:s.ComponentDatatype.UNSIGNED_INT,1:s.ComponentDatatype.FLOAT,2:s.ComponentDatatype.DOUBLE,3:s.ComponentDatatype.SHORT,4:s.ComponentDatatype.UNSIGNED_BYTE};function lt(e,t,r,a,n){var A,o=a,B=t.getUint32(o+r,!0);if(o+=Uint32Array.BYTES_PER_ELEMENT,n.verticesCount,B>0){t.getUint16(o+r,!0),o+=Uint16Array.BYTES_PER_ELEMENT,o+=2*Uint8Array.BYTES_PER_ELEMENT;var E=B*Uint8Array.BYTES_PER_ELEMENT*4;A=e.subarray(o,o+E),o+=E;var i=n.vertexAttributes,C=n.attrLocation;C.aColor=i.length,i.push({index:C.aColor,typedArray:A,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:4,normalize:!0})}return{bytesOffset:o}}function ut(e,t,r,a,n){var A=a,o=t.getUint32(A+r,!0);return A+=Uint32Array.BYTES_PER_ELEMENT,o<=0?{bytesOffset:A}:(t.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,A+=2*Uint8Array.BYTES_PER_ELEMENT,{bytesOffset:A+=o*Uint8Array.BYTES_PER_ELEMENT*4})}function ft(e,t,r,a,n){var A=n,o=[],B=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var E=0;E<B;E++){var i={};e>=3&&(r.getUint32(A+a,!0),A+=Uint32Array.BYTES_PER_ELEMENT);var C=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var s=r.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,r.getUint8(A+a,!0),A+=Uint8Array.BYTES_PER_ELEMENT;var y=r.getUint8(A+a,!0);if(A+=Uint8Array.BYTES_PER_ELEMENT,A+=Uint8Array.BYTES_PER_ELEMENT,C>0){var l=0,u=null;1===s||3===s?(l=C*Uint32Array.BYTES_PER_ELEMENT,u=t.subarray(A,A+l)):(l=C*Uint16Array.BYTES_PER_ELEMENT,u=t.subarray(A,A+l),C%2!=0&&(l+=2)),i.indicesTypedArray=u,A+=l}i.indicesCount=C,i.indexType=s,i.primitiveType=y;var f=[],P=r.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var c=0;c<P;c++){var d=qe(r,a,t,A),p=d.string;A=d.bytesOffset,f.push(p),i.materialCode=p}if(0===P&&(i.materialCode="OSGBEmpty"),o.push(i),0!==A%4)A+=4-A%4}return{bytesOffset:A,arrIndexPackage:o}}function Pt(e){let{version:t,typedArray:r,view:n,viewByteOffset:A,bufferByteOffset:i,vertexPackage:C,isOldVersion:y,scratchMat:u,bCoverImageryLayer:P,transformPar:c,isComputeHeight:d,fileType:p}=e,T=u;var D,L,g=i,F=n.getUint32(g+A,!0);return C.nCompressOptions=F,g+=Uint32Array.BYTES_PER_ELEMENT,(F&l.VertexCompressOption.SVC_Vertex)==l.VertexCompressOption.SVC_Vertex?(D=function(e,t,r,n,A,i){var C=n,y=t.getUint32(C+r,!0);if(A.verticesCount=y,C+=Uint32Array.BYTES_PER_ELEMENT,y<=0)return{bytesOffset:C};var l=t.getUint16(C+r,!0);C+=Uint16Array.BYTES_PER_ELEMENT;var u=t.getUint16(C+r,!0);u=l*Int16Array.BYTES_PER_ELEMENT,C+=Uint16Array.BYTES_PER_ELEMENT;var P=t.getFloat32(C+r,!0);C+=Float32Array.BYTES_PER_ELEMENT;var c=new E.e;c.x=t.getFloat32(C+r,!0),C+=Float32Array.BYTES_PER_ELEMENT,c.y=t.getFloat32(C+r,!0),C+=Float32Array.BYTES_PER_ELEMENT,c.z=t.getFloat32(C+r,!0),C+=Float32Array.BYTES_PER_ELEMENT,c.w=t.getFloat32(C+r,!0),C+=Float32Array.BYTES_PER_ELEMENT,A.vertCompressConstant=P,A.minVerticesValue=c;var d=y*l*Int16Array.BYTES_PER_ELEMENT,p=e.subarray(C,C+d);if(C+=d,a.e(i)){var T=new Uint16Array(p.byteLength/2),D=new Uint16Array(p.buffer,p.byteOffset,p.byteLength/2),L=E.e.unpackArray(D);for(let e=0,t=L.length;e<t;e++){let t=L[e];B.o.multiplyByScalar(t,P,t),B.o.add(t,c,t)}var g=f.y.multiply(i.sphereMatrix,i.geoMatrix,Bt),F=f.y.multiply(i.ellipsoidMatrix,i.geoMatrix,Et);f.y.inverse(F,F);var v=new o.t(6378137,6378137,6378137),I=0;for(let e=0,t=L.length;e<t;e++){let t=L[e];f.y.multiplyByPoint(g,t,At);let r=v.cartesianToCartographic(At,ot),a=nt(r.longitude,r.latitude,r.height,At);f.y.multiplyByPoint(F,a,t),B.o.subtract(t,c,t),B.o.divideByScalar(t,P,t),E.e.pack(t,T,I),I+=4}p=T}var M=A.vertexAttributes,m=A.attrLocation;return m.aPosition=M.length,M.push({index:m.aPosition,typedArray:p,componentsPerAttribute:l,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:u,normalize:!1}),{bytesOffset:C}}(r,n,A,g,C,c),g=D.bytesOffset):(g=(D=it(r,n,A,g,C,T,P,c,d)).bytesOffset,L=D.cartographicBounds),(F&l.VertexCompressOption.SVC_Normal)==l.VertexCompressOption.SVC_Normal?(D=function(e,t,r,a,n){var A=a,o=t.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};t.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var B=t.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var E=2*o*Int16Array.BYTES_PER_ELEMENT,i=e.subarray(A,A+E);if(A+=E,!n.ignoreNormal){var C=n.vertexAttributes,y=n.attrLocation;y.aNormal=C.length,C.push({index:y.aNormal,typedArray:i,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:B,normalize:!1})}return{bytesOffset:A}}(r,n,A,g,C),g=D.bytesOffset):g=(D=Ct(r,n,A,g,C,p)).bytesOffset,g=(D=ut(0,n,A,g=(D=lt(r,n,A,g,C)).bytesOffset)).bytesOffset,(F&l.VertexCompressOption.SVC_TexutreCoord)==l.VertexCompressOption.SVC_TexutreCoord?(D=function(e,t,r,a,n){n.texCoordCompressConstant=[],n.minTexCoordValue=[];var A=r,o=e.getUint16(r+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,A+=Uint16Array.BYTES_PER_ELEMENT;for(var B=0,i=0;i<o;i++){var C=e.getUint8(A+a,!0);A+=Uint8Array.BYTES_PER_ELEMENT,A+=3*Uint8Array.BYTES_PER_ELEMENT;var y=e.getUint32(A+a,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var l=e.getUint16(A+a,!0);A+=Uint16Array.BYTES_PER_ELEMENT,e.getUint16(A+a,!0),A+=Uint16Array.BYTES_PER_ELEMENT;var u=e.getFloat32(A+a,!0);A+=Float32Array.BYTES_PER_ELEMENT,n.texCoordCompressConstant.push(u);var f=new E.e;f.x=e.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,f.y=e.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,f.z=e.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,f.w=e.getFloat32(A+a,!0),A+=Float32Array.BYTES_PER_ELEMENT,n.minTexCoordValue.push(f);var P=y*l*Int16Array.BYTES_PER_ELEMENT,c=t.subarray(A,A+P),d=(A+=P)%4;0!==d&&(A+=4-d);var p="aTexCoord"+B,T=n.vertexAttributes,D=n.attrLocation;if(D[p]=T.length,T.push({index:D[p],typedArray:c,componentsPerAttribute:l,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:l*Int16Array.BYTES_PER_ELEMENT,normalize:!1}),C){P=y*Float32Array.BYTES_PER_ELEMENT;var L=t.subarray(A,A+P);A+=P,n.texCoordZMatrix=!0,D[p="aTexCoordZ"+B]=T.length,T.push({index:D[p],typedArray:L,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:Float32Array.BYTES_PER_ELEMENT,normalize:!1})}B++}return{bytesOffset:A}}(n,r,g,A,C),g=D.bytesOffset):g=(D=$e(n,r,g,A,C,y)).bytesOffset,(F&l.VertexCompressOption.SVC_TexutreCoordIsW)==l.VertexCompressOption.SVC_TexutreCoordIsW&&(C.textureCoordIsW=!0),{bytesOffset:g=(D=et(n,r,g,A,C,t)).bytesOffset,cartographicBounds:L}}function ct(e){let{version:t,typedArray:r,view:n,viewByteOffset:A,bufferByteOffset:o,vertexPackage:B,isOldVersion:E,scratchMat:i,bCoverImageryLayer:C,transformPar:s,isComputeHeight:y,curCategoryFieldName:l,fileType:u,isMultiTemporalWeight:f}=e,P=i;t>=3&&(n.getUint32(o,!0),o+=Uint32Array.BYTES_PER_ELEMENT,a.e(C)&&C||Te||y||(P=void 0));var c,d=o;d=(c=it(r,n,A,d,B,P,C,s,y)).bytesOffset;var p=c.cartographicBounds;if(d=(c=lt(r,n,A,d=(c=Ct(r,n,A,d,B,u)).bytesOffset,B)).bytesOffset,t<3&&(d=(c=ut(0,n,A,d)).bytesOffset),d=(c=et(n,r,d=(c=$e(n,r,d,A,B,E)).bytesOffset,A,B,t)).bytesOffset,t>=3&&(c=function(e,t,r,a,n){var A=a,o=t.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;for(var B=0;B<o;B++){var E=t.getUint32(A+r,!0);A+=Uint32Array.BYTES_PER_ELEMENT;var i=t.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var C=t.getUint16(A+r,!0);A+=Uint16Array.BYTES_PER_ELEMENT;var s=E*i*st[C],y=e.subarray(A,A+s);A+=s;let a=yt[C];n.customAttributesArr.push({typedArray:y,componentsPerAttribute:i,componentDatatype:a,offsetInBytes:0,strideInBytes:0,normalize:!1})}return{bytesOffset:A}}(r,n,A,d,B),d=c.bytesOffset),t>=3){var T=qe(n,A,r,d);d=T.bytesOffset,B.customVertexAttribute=JSON.parse(T.string),_t(B,l,u,f);var D=(d+A)%4;D&&(D=4-D),d+=D}return t>=3&&(c=function(e,t,r,a,n){var A=a,o=t.getUint32(A+r,!0);if(A+=Uint32Array.BYTES_PER_ELEMENT,o<=0)return{bytesOffset:A};var B=t.getUint16(A+r,!0);return A+=Uint16Array.BYTES_PER_ELEMENT,t.getUint16(A+r,!0),A+=Uint16Array.BYTES_PER_ELEMENT,{bytesOffset:A+=o*B*Float32Array.BYTES_PER_ELEMENT}}(0,n,A,d),d=c.bytesOffset),{bytesOffset:d,cartographicBounds:p}}function dt(e){return 0!==e.length&&"ClampGroundAndObjectLinePass"===e[0].materialCode}var pt=1,Tt=4,Dt=8,Lt=16,gt=32,Ft=64,vt=128,It=512,Mt=1024;const mt={VertexWeight:"aVertexWeight",PointCloudIntensity:"aIntensity",TextureCoordMatrix:"aTextureCoordMatrix",VertexWeight_1:"aVertexWeight_1"};function _t(e,t,r,n){let A=e.customAttributesArr,o=e.customVertexAttribute;if(!a.e(o)||!a.e(A)||A.length<1)return;if(r===te.PointCloudFile){let r=o[t];if(!a.e(r))return;let n=A[r],B=e.vertexAttributes;if(n.index=B.length,e.vertexAttributes.push(n),e.attrLocation[mt.VertexWeight]=n.index,ce.Elevation===t){let t=o[ce.Intensity];if(!a.e(t))return;let r=A[t];r.index=B.length,e.vertexAttributes.push(r),e.attrLocation[mt.PointCloudIntensity]=r.index}return void(e.customAttributesArr=void 0)}let B=e.vertexAttributes;for(let t in o){let r=mt[t];if(void 0===r)continue;let a=A[o[t]];a.index=B.length,B.push(a),e.attrLocation[r]=a.index}n||(e.customAttributesArr=void 0)}function St(e,t){let{skeletonBuffer:r,view:n,viewByteOffset:A,geoPackage:i,isOldVersion:C,hasOBB:y,version:u,modelMatrix:P,geoMatMap:c,bCoverImageryLayer:d,fileType:p,transformPar:T,isComputeHeight:D,curCategoryFieldName:L,isMultiTemporalWeight:g,sceneMode:F,isMercatorProjection:v}=e;var I=r,M=0,m=n.getUint32(M+A,!0);M+=Uint32Array.BYTES_PER_ELEMENT,c=a.u(c,a.u.EMPTY_OBJECT);for(var _=void 0,S=0;S<m;S++){u>=3&&(n.getUint32(M+A,!0),M+=Uint32Array.BYTES_PER_ELEMENT);var N=(He=qe(n,A,I,M)).string;if(a.e(P)){var h=a.u(c[N],f.y.IDENTITY);_=new f.y,f.y.multiply(P,h,_)}else _=f.y.IDENTITY;a.e(T)&&(T.geoMatrix=a.u(c[N],f.y.IDENTITY));var R=(M=He.bytesOffset)%4;0!==R&&(M+=4-R);var b=Se;if(b=n.getUint32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT,(Ct={vertexAttributes:[],attrLocation:{},instanceCount:0,instanceMode:0,instanceIndex:-1}).ignoreNormal=i.ignoreNormal,Ct.customAttributesArr=[],u>=3)switch(b){case Re:b=Oe;break;case be:b=he;break;case Ge:b=Ne}if(b===he){u>=3&&(n.getInt32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT),u>=2&&(n.getInt32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT);var G,U={};U.posUniqueID=n.getInt32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT,U.normalUniqueID=n.getInt32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT,U.colorUniqueID=n.getInt32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT,u<=3&&(U.secondColorUniqueID=n.getInt32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT),u>=3?(G=n.getUint32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT):(G=n.getUint16(M+A,!0),M+=Int16Array.BYTES_PER_ELEMENT);for(var x=[],K=0;K<G;K++){var w=n.getInt32(M+A,!0);x.push(w),M+=Int32Array.BYTES_PER_ELEMENT}U.texCoordUniqueIDs=x;var V=[];if(u>=3){var Y=n.getUint32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT;for(var J=0;J<Y;J++){var k=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT,V.push(k)}}U.vertexAttrUniqueIDs=V;var W=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT;var Z=[],X={};if(W>0){var z=(Q=qe(n,A,I,M)).string;M=Q.bytesOffset,X.materialCode=z,Z.push(X)}u>=3&&((Je=(M+A)%4)&&(Je=4-Je),M+=Je);var Q,j=new Object,q=n.getUint32(M+A,!0),$=O(I,M+=Int32Array.BYTES_PER_ELEMENT,M+q);if(W>0?H.dracoDecodeMesh(me,$,q,Ct,X,U,_,d,Te,j,T):H.dracoDecodePointCloud(me,$,q,Ct,U),a.e(j.min)&&a.e(j.max)||(j=void 0),M+=q,u>=3)(Je=(M+A)%4)&&(Je=4-Je),M=(Q=qe(n,A,I,M+=Je)).bytesOffset,Ct.customVertexAttribute=JSON.parse(Q.string),_t(Ct,L,p,g),(Je=(M+A)%4)&&(Je=4-Je),M+=Je;i[N]={vertexPackage:Ct,arrIndexPackage:Z,cartographicBounds:j}}else if(b==Ne&&u>=3){var ee=n.getUint32(M+A,!0);M+=Uint32Array.BYTES_PER_ELEMENT;var te=n.getUint32(M+A,!0);M+=Uint32Array.BYTES_PER_ELEMENT,Ct.minVerticesValue=new E.e,Ct.minTexCoordValue=[new o.o,new o.o],Ct.texCoordCompressConstant=[new B.o,new B.o];Z=[];for(var re=0;re<te;re++){var ae=n.getUint32(M+A,!0);M+=Uint32Array.BYTES_PER_ELEMENT,Ct.vertCompressConstant=n.getFloat32(M+A,!0),M+=Float32Array.BYTES_PER_ELEMENT,Ct.minVerticesValue.x=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,Ct.minVerticesValue.y=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,Ct.minVerticesValue.z=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT;var ne=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT;var Ae=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT;var oe=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT;var Be=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT;var Ee=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT;var ie=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT;var Ce=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT;var se=n.getFloat64(M+A,!0);M+=Float64Array.BYTES_PER_ELEMENT,Ct.minTexCoordValue[0].x=oe,Ct.minTexCoordValue[0].y=Be,Ct.minTexCoordValue[1].x=Ce,Ct.minTexCoordValue[1].y=se,Ct.texCoordCompressConstant[0].x=ne,Ct.texCoordCompressConstant[0].y=Ae,Ct.texCoordCompressConstant[1].x=Ee,Ct.texCoordCompressConstant[1].y=ie;var le=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT;j=new Object;for(var ue=0;ue<le;ue++){var fe=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT;var Pe=fe,ce=0;Pe!=It&&Pe!=Mt||(ce=n.getInt32(M+A,!0),M+=Int32Array.BYTES_PER_ELEMENT);var de=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT;var pe=new Uint8Array(n.buffer,M+A,de);(Je=((M+=Uint8Array.BYTES_PER_ELEMENT*de)+A)%4)&&(Je=4-Je),M+=Je,Nt(ae,Pe,ce,pe,Ct,ee,T,d,j,_,t,F,v)}M=(Ye=qe(n,A,I,M)).bytesOffset,Ct.customVertexAttribute=JSON.parse(Ye.string),(Je=(M+A)%4)&&(Je=4-Je),M+=Je;var De=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT;for(var Le=0;Le<De;Le++){X={};var ge=n.getInt32(M+A,!0);if(M+=Int32Array.BYTES_PER_ELEMENT,ge>0){var Fe=n.getInt8(M+A,!0);M+=Int8Array.BYTES_PER_ELEMENT,n.getInt8(M+A,!0),M+=Int8Array.BYTES_PER_ELEMENT;var ve=n.getInt8(M+A,!0);M+=Int8Array.BYTES_PER_ELEMENT,n.getInt8(M+A,!0),M+=Int8Array.BYTES_PER_ELEMENT;var Ie,Me,_e=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT,13!==ve?(Ie=new Uint8Array(n.buffer,M+A,_e),M+=Uint8Array.BYTES_PER_ELEMENT*_e):(Ie=new Uint32Array(n.buffer,M+A,_e),M+=Uint32Array.BYTES_PER_ELEMENT*_e),(Je=(M+A)%4)&&(Je=4-Je),M+=Je,13!==ve?(Me=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,ge*Uint32Array.BYTES_PER_ELEMENT),ye.decodeIndexBuffer(Me,ge,Uint32Array.BYTES_PER_ELEMENT,Ie)):Me=Ie;var Ue,xe=n.getInt32(M+A,!0);M+=Int32Array.BYTES_PER_ELEMENT,X.indexType=Fe,0===Fe?Ue=new Uint16Array(ge):1===Fe&&(Ue=new Uint32Array(ge)),X.indicesCount=ge;var Ke=new Uint32Array(Me.buffer,Me.byteOffset,Me.byteLength/4);Ue.set(Ke,0),X.indicesTypedArray=Ue,t.push(Ue.buffer),X.primitiveType=ve;for(ue=0;ue<xe;ue++){var He;z=(He=qe(n,A,I,M)).string;M=He.bytesOffset,X.materialCode=z}if(Z.length>0&&13!==ve){var we=Ct.preVertexCount;X.indicesTypedArray=Ke.map((function(e){return e+we})),X.indexType=1}Z.push(X),(Je=(M+A)%4)&&(Je=4-Je),M+=Je}}}u>3&&(M=et(n,I,M,A,Ct,u).bytesOffset),Ct.nCompressOptions=ee,2===Z.length&&13===Z[1].primitiveType&&Z[1].indicesCount>=3&&(Ve=l._0x3a8808.createEdgeDataByIndices(Ct,Z[1],t)),a.e(j.min)&&a.e(j.max)||(j=void 0),i[N]={vertexPackage:Ct,arrIndexPackage:Z,edgeGeometry:Ve,cartographicBounds:j}}else{var Ve;if(b===Oe||b===Se){M=(He=ct({version:u,typedArray:I,view:n,viewByteOffset:A,bufferByteOffset:M,vertexPackage:Ct,isOldVersion:C,scratchMat:_,bCoverImageryLayer:d,transformPar:T,isComputeHeight:D,curCategoryFieldName:L,fileType:p,isMultiTemporalWeight:g})).bytesOffset,j=He.cartographicBounds}else if(b===Ne){var Ye,Je;if(M=(He=Pt({version:u,typedArray:I,view:n,viewByteOffset:A,bufferByteOffset:M,vertexPackage:Ct,isOldVersion:C,scratchMat:_,bCoverImageryLayer:d,transformPar:T,isComputeHeight:D,curCategoryFieldName:L,fileType:p})).bytesOffset,j=He.cartographicBounds,u>=3)M=(Ye=qe(n,A,I,M)).bytesOffset,Ct.customVertexAttribute=JSON.parse(Ye.string),_t(Ct,L,p,g),(Je=(M+A)%4)&&(Je=4-Je),M+=Je}dt(Z=(He=ft(u,I,n,A,M)).arrIndexPackage)&&(Ct.clampRegionEdge=!0),2===Z.length&&13===Z[1].primitiveType&&Z[1].indicesCount>=3&&(Ve=l._0x3a8808.createEdgeDataByIndices(Ct,Z[1],t)),M=He.bytesOffset,a.e(j)&&a.e(j.min)&&a.e(j.max)||(j=void 0),i[N]={vertexPackage:Ct,arrIndexPackage:Z,edgeGeometry:Ve,cartographicBounds:j}}if(u<3&&a.e(y)&&y){var ke=n.getUint16(M+A,!0);if(M+=Uint16Array.BYTES_PER_ELEMENT,1===ke){var We=n.getUint32(M+A,!0);M+=Uint32Array.BYTES_PER_ELEMENT;var Ze,Xe=n.getUint32(M+A,!0);M+=Uint32Array.BYTES_PER_ELEMENT,n.getFloat32(M+A,!0),M+=Float32Array.BYTES_PER_ELEMENT;var ze=new Array(We),Qe=new Array(We),je=new Array(We),$e=new Array(We);for(Ze=0;Ze<We;Ze++){var tt=n.getFloat32(M+A,!0);M+=Float32Array.BYTES_PER_ELEMENT,ze[Ze]=tt;var rt=n.getUint16(M+A,!0);M+=Uint16Array.BYTES_PER_ELEMENT,Qe[Ze]=rt;var at=n.getUint16(M+A,!0);M+=Uint16Array.BYTES_PER_ELEMENT,je[Ze]=at;for(var nt=at*Xe,At=new Array(nt),ot=0;ot<nt;ot++){var Bt=n.getFloat32(M+A,!0);M+=Float32Array.BYTES_PER_ELEMENT,At[ot]=Bt}$e[Ze]=At}}var Et=new B.o,it=new B.o;Et.x=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,Et.y=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,Et.z=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,it.x=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,it.y=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,it.z=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,i[N].min=Et,i[N].max=it;var Ct=i[N].vertexPackage;a.e(Ct.instanceBuffer)&&2===u&&(Ct.instanceBounds=new Float32Array(6),B.o.pack(Et,Ct.instanceBounds,0),B.o.pack(it,Ct.instanceBounds,3))}if(u>=3){var st=new B.o;st.x=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,st.y=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,st.z=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT;var yt=new B.o;yt.x=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,yt.y=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,yt.z=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT;var lt=new B.o;lt.x=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,lt.y=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,lt.z=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT;var ut=new B.o;ut.x=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,ut.y=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT,ut.z=n.getFloat64(M+A,!0),M+=Float64Array.BYTES_PER_ELEMENT}}}function Ot(e,t,r){var a=e.typedArray,n=new r(a.length+t.length);n.set(a,0),n.set(t,a.length),e.typedArray=n}function Nt(e,t,r,a,n,o,E,C,y,l,u,P,c){var d,p=0,T=n.vertexAttributes,D=n.attrLocation;switch(t){case Tt:case Dt:case Lt:case gt:p=2*Uint16Array.BYTES_PER_ELEMENT,0!=(16&o)||t!==Lt&&t!==gt||(p=2*Float32Array.BYTES_PER_ELEMENT),d=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,e*p);break;case Ft:case vt:p=4*Uint8Array.BYTES_PER_ELEMENT,d=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,4*e);break;case It:case Mt:p=Float32Array.BYTES_PER_ELEMENT*r,d=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,e*r*4);break;default:p=4*Uint16Array.BYTES_PER_ELEMENT,d=s.ComponentDatatype.createTypedArray(s.ComponentDatatype.UNSIGNED_BYTE,e*p)}switch(ye.decodeVertexBuffer(d,e,p,a,a.length),u.push(d.buffer),t){case pt:var L=new Uint16Array(d.buffer,0,d.length/2),g=s.ComponentDatatype.SHORT;if(void 0!==(G=D.aPosition)?(Ot(T[G],L,Uint16Array),n.preVertexCount=n.verticesCount,n.verticesCount+=e):(D.aPosition=T.length,T.push({index:D.aPosition,typedArray:L,componentsPerAttribute:4,componentDatatype:g,offsetInBytes:0,strideInBytes:0,normalize:!1}),n.verticesCount=e),C||Te){for(var v=new i.a,I=new i.a,M=new Float32Array(2*e),m=new Float64Array(2*e),_=new B.o,S=new B.o,O=new i.a,N=0;N<e;N++){if(f.y.multiplyByPoint(l,B.o.fromElements(L[4*N]*n.vertCompressConstant+n.minVerticesValue.x,L[4*N+1]*n.vertCompressConstant+n.minVerticesValue.y,L[4*N+2]*n.vertCompressConstant+n.minVerticesValue.z,_),S),P!==pe.SCENE3D){var h=B.o.fromElements(S.y,S.z,S.x);O=(c?new F.t:new A.n).unproject(h)}else O=i.a.fromCartesian(S);m[2*N]=O.longitude,m[2*N+1]=O.latitude,0===N?(v.longitude=O.longitude,v.latitude=O.latitude,I.longitude=O.longitude,I.latitude=O.latitude):(v.longitude=Math.max(O.longitude,v.longitude),v.latitude=Math.max(O.latitude,v.latitude),I.longitude=Math.min(O.longitude,I.longitude),I.latitude=Math.min(O.latitude,I.latitude))}var R=Te?v.longitude-I.longitude:1,b=Te?v.latitude-I.latitude:1;for(N=0;N<e;N++)M[2*N]=(m[2*N]-I.longitude)/R,M[2*N+1]=(m[2*N+1]-I.latitude)/b;D.aRelativeGeoCoord=T.length,T.push({index:D.aRelativeGeoCoord,typedArray:M,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:2*Float32Array.BYTES_PER_ELEMENT,normalize:!1}),y.max=v,y.min=I}break;case Tt:var G=D.aNormal,U=new Int16Array(d.buffer,0,d.length/2);void 0!==G?Ot(T[G],U,Uint16Array):(D.aNormal=T.length,T.push({index:D.aNormal,typedArray:U,componentsPerAttribute:2,componentDatatype:s.ComponentDatatype.SHORT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Lt:var x=new Uint16Array(d.buffer,0,d.length/2),K=(G=D.aTexCoord0,g=s.ComponentDatatype.SHORT,Uint16Array);0==(16&o)&&(g=s.ComponentDatatype.FLOAT,K=Float32Array,x=new Float32Array(d.buffer,0,d.length/4)),void 0!==G?Ot(T[G],x,K):(D.aTexCoord0=T.length,T.push({index:D.aTexCoord0,typedArray:x,componentsPerAttribute:2,componentDatatype:g,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case gt:x=new Uint16Array(d.buffer,0,d.length/2),G=D.aTexCoord1,g=s.ComponentDatatype.SHORT,K=Uint16Array;0==(16&o)&&(g=s.ComponentDatatype.FLOAT,K=Float32Array,x=new Float32Array(d.buffer,0,d.length/4)),void 0!==G?Ot(T[G],x,K):(D.aTexCoord1=T.length,T.push({index:D.aTexCoord1,typedArray:x,componentsPerAttribute:2,componentDatatype:g,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Ft:void 0!==(G=D.aColor)?Ot(T[G],d,Uint8Array):(D.aColor=T.length,T.push({index:D.aColor,typedArray:d,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.UNSIGNED_BYTE,offsetInBytes:0,strideInBytes:0,normalize:!0}));break;case vt:void 0!==(G=D.aSecondColor)?Ot(T[G],d,Uint8Array):(D.aSecondColor=T.length,T.push({index:D.aSecondColor,typedArray:d,componentsPerAttribute:4,componentDatatype:s.ComponentDatatype.BYTE,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case It:x=new Float32Array(d.buffer,0,d.length/4);void 0!==(G=D.aVertexWeight)?Ot(T[G],x,Float32Array):(D.aVertexWeight=T.length,T.push({index:D.aVertexWeight,typedArray:x,componentsPerAttribute:r,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}));break;case Mt:var H=new Float32Array(d.buffer,0,d.length/4);void 0!==(G=D.aTextureCoordMatrix)?Ot(T[G],H,Float32Array):(D.aTextureCoordMatrix=T.length,T.push({index:D.aTextureCoordMatrix,typedArray:H,componentsPerAttribute:r,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,normalize:!1}))}}function ht(e,t,r,n,A){var o={},B=[],E=new f.y,i=e;A=a.u(A,{});for(var C=0;C<16;C++)E[C]=t.getFloat64(r+n,!0),r+=Float64Array.BYTES_PER_ELEMENT;o.matrix=E,o.skeletonNames=B;var s=t.getUint32(r+n,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var y=0;y<s;y++){var l=qe(t,n,i,r),u=l.string;r=l.bytesOffset,B.push(u),A[u]=E}return{byteOffset:r,geode:o}}function Rt(e){var t=e.indexOf("Geometry");if(-1===t)return e;var r=e.substring(t,e.length);return e.replace(r,"")}function bt(e,t,r,n,E,i,C){var s={},y=r.getFloat32(n+E,!0);n+=Float32Array.BYTES_PER_ELEMENT;var l=r.getUint16(n+E,!0);n+=Uint16Array.BYTES_PER_ELEMENT,s.rangeMode=l,s.rangeList=y;var u=new B.o;u.x=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,u.y=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,u.z=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT;var P=r.getFloat64(n+E,!0);if(n+=Float64Array.BYTES_PER_ELEMENT,a.e(C)){var c=f.y.clone(C.sphereMatrix,Bt),d=f.y.clone(C.ellipsoidMatrix,Et);f.y.inverse(d,d);var p=new o.t(6378137,6378137,6378137);f.y.multiplyByPoint(c,u,At);let e=p.cartesianToCartographic(At,ot),t=nt(e.longitude,e.latitude,e.height,At);f.y.multiplyByPoint(d,t,u)}if(s.boundingSphere=new A.i(u,P),e>=3){var T=new B.o;T.x=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,T.y=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,T.z=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT;var D=new B.o;D.x=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,D.y=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,D.z=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT;var L=new B.o;L.x=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,L.y=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,L.z=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT;var g=new B.o;g.x=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,g.y=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,g.z=r.getFloat64(n+E,!0),n+=Float64Array.BYTES_PER_ELEMENT,0==D.x&&0==D.y&&0==D.z&&(D.x=1),0==L.x&&0==L.y&&0==L.z&&(L.y=1),0==g.x&&0==g.y&&0==g.z&&(g.z=1),s._obb={xExtent:D,yExtent:L,zExtent:g,obbCenter:T}}var F=t,v=(m=qe(r,E,F,n)).string;n=m.bytesOffset,v=Rt(v=(v=v.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")).replace(/\\/gi,"/")),s.childTile=v,s.geodes=[];var I=r.getUint32(n+E,!0);n+=Uint32Array.BYTES_PER_ELEMENT;for(var M=0;M<I;M++){var m;n=(m=ht(t,r,n,E,i)).byteOffset,s.geodes.push(m.geode)}return e>=3&&(n=(m=qe(r,E,F,n)).bytesOffset),{pageLOD:s,bytesOffset:n}}function Gt(e,t,r,a,n,A){var o=0,B={},E=[],i=r.getUint32(o+a,!0);o+=Uint32Array.BYTES_PER_ELEMENT;for(var C=0;C<i;C++){var s=bt(e,t,r,o,a,n,A);o=s.bytesOffset,E.push(s.pageLOD)}return B.pageLods=E,B}function Ut(e,r){var a=e.vertexAttributes,n=e.attrLocation,A=a.length;n.aTextureBatchId=A;var o,B=e.verticesCount,E=Object.keys(r).length;if(1==E)o=r[0];else if(E>1)for(var i in o=new Float32Array(B*E),t.d(o,-1),r)for(var C=r[i],y=parseInt(i),l=0;l<B;l++)o[2*l+y]=C[l];a.push({index:A,typedArray:o,componentsPerAttribute:E,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0})}function xt(e,r,n,A){for(var o=n.length,B=0;B<o;B++)for(var E=n[B],i=E.subName.split("_")[0],C=E.subVertexOffsetArr,s=0;s<C.length;s++){var y=C[s],l=y.geoName,u=y.offset,f=y.count,P=y.texUnitIndex,c=r[l].vertexPackage.verticesCount,d=A[l];a.e(d)||(d=A[l]={});var p=d[P];a.e(p)||(p=d[P]=new Float32Array(c),t.d(p,-1));var T=a.e(e)?e[i]:B;t.d(p,T,u,u+f)}}function Kt(e,t,r){var a=e.vertexAttributes,n=e.attrLocation,A=a.length;n[1===r?"instanceId":"batchId"]=A,a.push({index:A,typedArray:t,componentsPerAttribute:1,componentDatatype:s.ComponentDatatype.FLOAT,offsetInBytes:0,strideInBytes:0,instanceDivisor:r})}function Ht(e,r,n,A,o,B){var E=0,i=e,C=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;for(var s=0;s<C;s++){var y=qe(r,n,i,E),u=y.string;E=y.bytesOffset;var f=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var P={};A[u].pickInfo=P;var c=A[u].edgeGeometry;if(-1==A[u].vertexPackage.instanceIndex){var d=new Float32Array(A[u].vertexPackage.verticesCount);B.push(d.buffer);for(var p=0;p<f;p++){var T=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var D=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;var L=0,g=0;P[T]={batchId:p};for(var F=0;F<D;F++)g=r.getUint32(E+n,!0),E+=Uint32Array.BYTES_PER_ELEMENT,L=r.getUint32(E+n,!0),E+=Uint32Array.BYTES_PER_ELEMENT,t.d(d,p,g,g+L);P[T].vertexColorOffset=g,P[T].vertexCount=L}Kt(A[u].vertexPackage,d,void 0)}else{var v=A[u].vertexPackage.instanceCount;A[u].vertexPackage.instanceBuffer,A[u].vertexPackage.instanceMode;var I=new Float32Array(v);B.push(I.buffer);var M=0;for(p=0;p<f;p++){var m=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;D=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT;for(F=0;F<D;F++){var _=r.getUint32(E+n,!0);if(E+=Uint32Array.BYTES_PER_ELEMENT,I[M]=M,void 0===P[m]&&(P[m]={vertexColorCount:1,instanceIds:[],vertexColorOffset:M}),P[m].instanceIds.push(_),M++,o>=3){L=r.getUint32(E+n,!0);E+=Uint32Array.BYTES_PER_ELEMENT}}}Kt(A[u].vertexPackage,I,1)}c=A[u].edgeGeometry;if(a.e(c)){var S,O,N=c.regular.instancesData,h=l._0x3a8808.RegularInstanceStride;if(a.e(N))for(O=N.length,S=0;S<O;S+=h){var R=N[S+9];N[S+9]=d[R]}var b=c.silhouette.instancesData;if(h=l._0x3a8808.SilhouetteInstanceStride,a.e(b))for(O=b.length,S=0;S<O;S+=h){R=b[S+12];b[S+12]=d[R]}}}}function wt(e){return e<1e-10&&e>-1e-10}function Vt(e,t,r,n,A,o,B,E,i,C){var s=new DataView(e),y=new Uint8Array(e),l=s.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var f=u.a(y,r,l);f=f.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,""),r+=l;var P=s.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;for(var c=0;c<P;c++){var p={},T=s.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;var L=s.getUint16(r,!0);r+=Uint16Array.BYTES_PER_ELEMENT,p.rangeMode=L,p.rangeList=T;var g={};g.x=s.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,g.y=s.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT,g.z=s.getFloat64(r,!0),r+=Float64Array.BYTES_PER_ELEMENT;var F=s.getFloat64(r,!0);r+=Float64Array.BYTES_PER_ELEMENT,p.boundingSphere={center:g,radius:F},l=s.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var v=u.a(y,r,l);r+=l,v=Rt(v=v.replace(/(\.s3mblock)|(\.s3mbz)|(\.s3mb)/gi,"")),p.childTile=v}var I={},M=s.getFloat32(r,!0);r+=Float32Array.BYTES_PER_ELEMENT;M>=3&&(s.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),s.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT;var m=s.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var _=new Uint8Array(e,r,m),S=r+m,O=D.pako.inflate(_).buffer;C.push(O),s=new DataView(O);y=new Uint8Array(O);r=0;var N=s.getUint32(r,!0),h=je(s,O,r+=Uint32Array.BYTES_PER_ELEMENT),R=h.buffer;r=h.byteOffset;var b=Gt(M,R,s,h.dataViewByteOffset),G=r%4;0!==G&&(r+=4-G),St({skeletonBuffer:(h=je(s,O,r)).buffer,view:s,viewByteOffset:h.dataViewByteOffset,geoPackage:I,isOldVersion:!1,version:M,curCategoryFieldName:E,fileType:1},C),r=h.byteOffset,M<3&&((h=je(s,O,r)).buffer,r=h.byteOffset);var x={};!function(e,t,r,n,A,o,B,E,i,C){var s=E,y=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;for(var l={},f=0;f<y;f++){var P=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var c=u.a(o,s-E,P),p=(s+=P)%4;0!==p&&(s+=4-p),B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var T=B.getUint8(s,!0);s+=Uint8Array.BYTES_PER_ELEMENT;var D=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var L=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var g=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var F=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var v,I=B.getUint32(s,!0);if(s+=Uint32Array.BYTES_PER_ELEMENT,n&&T){var M=s-E;v=o.subarray(M,M+F),s+=F}var m=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;for(var _=[],S=0;S<m;S++){P=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var O=u.a(o,s-E,P);s+=P,_.push(O),r[O]=c}var N=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var h=[];for(S=0;S<N;S++){P=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var R=u.a(o,s-E,P);s+=P,h.push(R)}var b=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var G=[],U=void 0,x=c;if(n)U=t[c]={};else{var K=r[c];for(x=K;a.e(K)&&K!==c;)x=K,K=r[K];a.e(x)&&(U=t[x])}var H=0;for(S=0;S<b;S++){P=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var w=u.a(o,s-E,P);if(s+=P,n){var V=w.split("_")[0];a.e(U[V])?H++:U[V]=S-H}var Y=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var J=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var k=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var W=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var Z=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;for(var X=[],z=0;z<Z;z++){P=B.getUint32(s,!0),s+=Uint32Array.BYTES_PER_ELEMENT;var Q=u.a(o,s-E,P);s+=P;var j=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var q=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT;var $=B.getUint32(s,!0);s+=Uint32Array.BYTES_PER_ELEMENT,X.push({geoName:Q,offset:j,count:q,texUnitIndex:$})}G.push({subName:w,offsetX:Y,offsetY:J,width:k,height:W,subVertexOffsetArr:X})}xt(U,e,G,l),a.e(v)&&g===d.S3MPixelFormat.CRN_DXT5&&Ie&&(v=Me({data:v},C).bufferView),i[c]={id:c,rootTextureName:x,width:D,height:L,compressType:g,size:F,format:I,textureData:v,subTexInfos:G,requestNames:h}}for(var Q in l)l.hasOwnProperty(Q)&&Ut(e[Q].vertexPackage,l[Q])}(I,n,A,o,0,(h=je(s,O,r)).buffer,s,h.dataViewByteOffset,x,C),r=h.byteOffset;var K=s.getUint32(r,!0);r+=Uint32Array.BYTES_PER_ELEMENT;var H=y.subarray(r,r+K),w=u.a(H);r+=K;var V=JSON.parse(w);(M>=3&&(N=s.getUint32(r,!0),r+=Uint32Array.BYTES_PER_ELEMENT),(N&_e)==_e)&&(Ht((h=je(s,O,r)).buffer,s,h.dataViewByteOffset,I,M,C),r=h.byteOffset);if(1==M){var Y=b.pageLods,J=!0;for(c=0;c<Y.length;c++){var k=Y[c];J=""===k.childTile;for(var W=k.geodes,Z=0;Z<W.length;Z++)for(var X=W[Z].skeletonNames,z=0;z<X.length;z++){var Q=X[z];if(J){var j=I[Q].vertexPackage;j.boundingSphere=ne.calcBoundingSphereInWorker(1,j)}}}}B[f]={result:!0,groupNode:b,geoPackage:I,matrials:V,texturePackage:x,version:U.S3M4,dataVersion:M,rootBatchIdMap:n,ancestorMap:A},S<t&&Vt(e,t,S,n,A,!1,B,E,1,C)}function Yt(t,r){var n=t.buffer;if(void 0===n)return;if(t.isOSGB){if(a.e(Ue)||new Promise((function(t,r){e(["./OSGBToS3M-17f0558d"],t,r)})).then((function(e){(Ue=e.default).onRuntimeInitialized=function(){Ke=!0},He=Ue.cwrap("OSGBToS3MB","number",["number","number","number","number"])})),!Ke)return null;var A;switch(t.suffix){case"dae":case"DAE":A=4;break;case"x":case"X":A=2;break;default:A=0}n=function(e,t,r){var a=Ue._malloc(20*t),n=Ue._malloc(Uint8Array.BYTES_PER_ELEMENT*t);Ue.HEAPU8.set(e,n/Uint8Array.BYTES_PER_ELEMENT);var A=He(n,t,a,r),o=new Uint8Array(Ue.HEAPU8.buffer,a,A);return e=null,e=new Uint8Array(o).buffer,Ue._free(a),Ue._free(n),e}(new Uint8Array(n),n.byteLength,A)}var o=t.isS3MZ,B=t.fileType,E=t.supportCompressType,i=t.bVolume,C=t.isS3MBlock,s=t.modelMatrix,y=t.materialType,f=t.isCoverImageryLayer;Te=!0===t.coverdMap;var P=t.transformPar,c=t.isComputeHeight;let p=t.curCategoryFieldName,T=t.isMultiTemporalWeight,L=t.temporalInfo;var F=null,v=null,I=null;if(i&&t.volbuffer.byteLength<8&&(i=!1),i){var M=t.volbuffer,m=new Uint8Array(M,8),_=D.pako.inflate(m).buffer,S=new Float64Array(_,0,1),O=new Uint32Array(_,48,1);if(0===S[0]||3200===O[0]||3201===O[0]){var N=0;0==S[0]&&(N=8),r.push(_);var h=new Float64Array(_,N,6),R=h[0],b=h[1],G=h[2],x=h[3],K=h[4]<h[5]?h[4]:h[5],H=h[4]>h[5]?h[4]:h[5];v={left:R,top:b,right:G,bottom:x,minHeight:K,maxHeight:H,width:(F=new Qe(R,x,G,b,K,H)).width,length:F.length,height:F.height};var w=new Uint32Array(_,48+N,7),V=w[0],Y=w[1],J=w[2],k=w[3];I={nFormat:V,nSideBlockCount:Y,nBlockLength:J,nLength:k,nWidth:w[4],nHeight:w[5],nDepth:w[6],imageArray:new Uint8Array(_,76+N,k*k*4)}}}var W=0,Z={};Z.ignoreNormal=t.ignoreNormal;var X=t.rootBatchIdMap||{},z=t.ancestorMap||{},Q={},j=new DataView(n),q=j.getFloat32(W,!0);if(W+=Float32Array.BYTES_PER_ELEMENT,C)return j.getUint32(W,!0),W+=Uint32Array.BYTES_PER_ELEMENT,Vt(n,n.byteLength,W,X,z,t.isRoot,Q,p,0,r),Q;var $,ee=!1,te=0;if(q>=3&&(te=j.getUint32(W,!0),W+=Uint32Array.BYTES_PER_ELEMENT),q>=2&&($=j.getUint32(W,!0),W+=Uint32Array.BYTES_PER_ELEMENT),wt(q-1)||wt(q-2)||q>=3||q>2.09&&q<2.11){var re=j.getUint32(W,!0);W+=Uint32Array.BYTES_PER_ELEMENT;var ae=new Uint8Array(n,W,re);q>=3&&0===te?n=ae.buffer:(n=!0===xe?function(e,t){var r=t||4*e.length,a=g.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*r),n=new Uint8Array(r);g.unzip.HEAPU8.set(n,a/Uint8Array.BYTES_PER_ELEMENT);var A,o=g.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*e.length);for(g.unzip.HEAPU8.set(e,o/Uint8Array.BYTES_PER_ELEMENT);0==(A=we(a,r,o,e.length));)Ve(a),r*=4,a=g.unzip._malloc(Uint8Array.BYTES_PER_ELEMENT*r),n=new Uint8Array(r),g.unzip.HEAPU8.set(n,a/Uint8Array.BYTES_PER_ELEMENT);var B=new Uint8Array(g.unzip.HEAPU8.buffer,a,A);e=null,n=null;var E=new Uint8Array(B).buffer;return Ve(a),Ve(o),E}(ae,$):D.pako.inflate(ae).buffer,W=0),r.push(n),j=new DataView(n)}else if(q>1.199&&q<1.201){re=j.getUint32(W,!0);W+=Uint32Array.BYTES_PER_ELEMENT,r.push(n)}else{ee=!0,W=0;re=j.getInt32(W,!0);if(W+=Int32Array.BYTES_PER_ELEMENT,W+=Uint8Array.BYTES_PER_ELEMENT*re,o){j.getUint32(W,!0),W+=Uint32Array.BYTES_PER_ELEMENT;m=new Uint8Array(n,W);n=D.pako.inflate(m).buffer,r.push(n),j=new DataView(n),W=0}}var Ae=j.getUint32(W,!0),oe=je(j,n,W+=Uint32Array.BYTES_PER_ELEMENT),Be=oe.buffer;W=oe.byteOffset;var Ee={},ie=Gt(q,Be,j,oe.dataViewByteOffset,Ee,P),Ce=W%4;0!==Ce&&(W+=4-Ce);var se=(oe=je(j,n,W)).buffer,ye=q>2.09&&q<3,le=t.sceneMode,ue=t.isMercatorProjection;if(St({skeletonBuffer:se,view:j,viewByteOffset:oe.dataViewByteOffset,geoPackage:Z,isOldVersion:ee,hasOBB:ye,version:q,modelMatrix:s,geoMatMap:Ee,bCoverImageryLayer:f,fileType:B,transformPar:P,isComputeHeight:c,curCategoryFieldName:p,isMultiTemporalWeight:T,sceneMode:le,isMercatorProjection:ue},r),W=oe.byteOffset,ye)for(var fe=0;fe<ie.pageLods.length;fe++)for(var Pe=ie.pageLods[fe],ce=Pe.geodes,de=0;de<ce.length;de++)for(var pe=ce[de].skeletonNames,De=0;De<pe.length;De++){var Le=pe[De];a.e(Z[Le].max)&&(a.e(Pe.max)?(Pe.max.x=Math.max(Z[Le].max.x,Pe.max.x),Pe.max.y=Math.max(Z[Le].max.y,Pe.max.y),Pe.max.z=Math.max(Z[Le].max.z,Pe.max.z),Pe.min.x=Math.min(Z[Le].min.x,Pe.min.x),Pe.min.y=Math.min(Z[Le].min.y,Pe.min.y),Pe.min.z=Math.min(Z[Le].min.z,Pe.min.z)):(Pe.max=Z[Le].max,Pe.min=Z[Le].min))}q<3&&((oe=je(j,n,W)).buffer,W=oe.byteOffset);var ge={};!function(e,t,r,a,n,A,o){var B=0,E=r.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;for(var i=0;i<E;i++){var C=qe(r,a,t,B),s=C.string,y=(B=C.bytesOffset)%4;0!==y&&(B+=4-y);var u=r.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var f=r.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var P=r.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var c=r.getUint32(B+a,!0);A>3&&(c=ze(c)),B+=Uint32Array.BYTES_PER_ELEMENT;var p=r.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var T=r.getUint32(B+a,!0);B+=Uint32Array.BYTES_PER_ELEMENT;var D=t.subarray(B,B+p);B+=p;var L=null,g=c;c===l.S3MCompressType.enrS3TCDXTN&&1!=e?(l.L.decode(L,f,P,D,T),L=T>d.S3MPixelFormat.BGR||T===d.S3MPixelFormat.LUMINANCE_ALPHA?new Uint8Array(f*P*4):new Uint16Array(f*P),l.L.decode(L,f,P,D,T),o.push(L.buffer),c=0):L=D,n[s]={id:s,width:f,height:P,compressType:c,oriCompressType:g,nFormat:T,imageBuffer:L,mipmapLevel:u}}}(E,(oe=je(j,n,W)).buffer,j,oe.dataViewByteOffset,ge,q,r),W=oe.byteOffset;var Fe=j.getUint32(W,!0);W+=Uint32Array.BYTES_PER_ELEMENT;var ve=new Uint8Array(n),Ie=ve.subarray(W,W+Fe),Me=u.a(Ie);W+=Fe,Me=Me.replace(/\n\0/,"");var me=JSON.parse(Me);(Ae&_e)==_e&&(q>=3&&(j.getUint32(W,!0),W+=Uint32Array.BYTES_PER_ELEMENT),Ht((oe=je(j,n,W)).buffer,j,oe.dataViewByteOffset,Z,q,r));if(1==q){var Se=ie.pageLods,Oe=!0;for(fe=0;fe<Se.length;fe++){var Ne=Se[fe];Oe=""===Ne.childTile;for(var he=Ne.geodes,Re=0;Re<he.length;Re++){pe=he[Re].skeletonNames;for(var be=0;be<pe.length;be++){var Ge=pe[be];if(Oe){var Ye=Z[Ge].vertexPackage;Ye.boundingSphere=ne.calcBoundingSphereInWorker(B,Ye)}}}}}let Je;if("BatchPBR"===y&&function(e,t,r,n){for(var A in delete e.ignoreNormal,e)if(e.hasOwnProperty(A)){var o=e[A],B=o.arrIndexPackage;if(B.length<1)continue;if(1===B.length||2===B.length&&13===B[1].primitiveType){var E=o.vertexPackage.attrLocation.aTextureCoordMatrix;if(void 0!==E){if((i=(N=o.vertexPackage.vertexAttributes[E]).typedArray)[0]<0)continue}else if(void 0!==(E=o.vertexPackage.attrLocation.aTextureCoordMatrix||o.vertexPackage.attrLocation.aTexCoord0)){N=o.vertexPackage.vertexAttributes[E];var i=new Float32Array(N.typedArray.buffer,N.typedArray.byteOffset,N.typedArray.byteLength/4);if(3===N.componentsPerAttribute&&i[2]<0)continue}}var C,s,y=0,u={},f=void 0;for(C=0,s=B.length;C<s;C++)13!==(h=B[C]).primitiveType?y+=0===h.indexType?h.indicesTypedArray.byteLength/2:h.indicesTypedArray.byteLength/4:f=B[C],0===C&&(u.indicesCount=0,u.indexType=B[C].indexType,u.primitiveType=B[C].primitiveType,u.materialCode=B[C].materialCode);u.indicesCount=y;var P=o.vertexPackage.verticesCount>65535?new Uint32Array(y):new Uint16Array(y),c=0;for(C=0,s=B.length;C<s;C++)if(13!==(h=B[C]).primitiveType){var d=0===h.indexType?Uint16Array:Uint32Array,p=0===h.indexType?h.indicesTypedArray.byteLength/2:h.indicesTypedArray.byteLength/4,T=new d(h.indicesTypedArray.buffer,h.indicesTypedArray.byteOffset,p);P.set(T,c),c+=T.length}u.indicesTypedArray=P,o.arrIndexPackage=[u],a.e(f)&&(o.arrIndexPackage.push(f),o.edgeGeometry=l._0x3a8808.createEdgeDataByIndices(o.vertexPackage,f));var D=2*B.length*4,L=new Float32Array(D),g={};for(C=0,s=r.material.length;C<s;C++)g[(R=r.material[C].material).id]=R;for(C=0,s=B.length;C<s;C++)if(R=g[(h=B[C]).materialCode]){var F=R.pbrMetallicRoughness;if(F){L[8*C]=F.metallicFactor,L[8*C+1]=F.roughnessFactor,L[8*C+2]=R.alphaCutoff;var v=""===R.alphaMode?0:1,I="none"===R.cullMode?0:1;L[8*C+3]=I|v<<16,L[8*C+4]=F.emissiveFactor.x,L[8*C+5]=F.emissiveFactor.y,L[8*C+6]=F.emissiveFactor.z,L[8*C+7]=0,R.pbrIndex=C}}var M="PBRMaterialParam_"+A;for(C=0,s=r.material.length;C<s;C++)if((R=r.material[C].material).id===u.materialCode){R.textureunitstates.push({textureunitstate:{addressmode:{u:0,v:0,w:0},filteringoption:0,filtermax:2,filtermin:2,id:M,texmodmatrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],url:""}});break}var m,_,S=o.vertexPackage,O=S.attrLocation.aTexCoord1;if(void 0!==O){var N=S.vertexAttributes[O];m=new Float32Array(2*S.verticesCount),N.typedArray=m}else m=new Float32Array(2*S.verticesCount),O=S.vertexAttributes.length,S.attrLocation.aTexCoord1=O,S.vertexAttributes.push({index:O,typedArray:m,componentsPerAttribute:2,componentDatatype:5126,offsetInBytes:0,strideInBytes:8,normalize:!1});for(n.push(m.buffer),void 0!==(O=S.attrLocation.aColor)&&(_=(N=S.vertexAttributes[O]).typedArray),C=0,s=B.length;C<s;C++){var h,R;if((R=g[(h=B[C]).materialCode])&&R.pbrMetallicRoughness)for(var b=R.pbrMetallicRoughness.baseColor,G=void 0!==_,U=R.pbrIndex,x=(P=h.indicesTypedArray,{}),K=0,H=(P=0===h.indexType?new Uint16Array(P.buffer,P.byteOffset,P.byteLength/2):new Uint32Array(P.buffer,P.byteOffset,P.byteLength/4)).length;K<H;K++){var w=P[K];m[2*w]=U,G&&void 0===x[w]&&(x[w]=!0,_[4*w]*=b.x,_[4*w+1]*=b.y,_[4*w+2]*=b.z,_[4*w+3]*=b.w)}}t[M]={id:M,width:2*B.length,height:1,compressType:0,nFormat:25,imageBuffer:L,mipmapLevel:0}}}(Z,ge,me,r),a.e(L)&&L.length>0&&q>=3){let e=j.getUint32(W,!0);if(W+=Uint32Array.BYTES_PER_ELEMENT,e>0){let t=ve.subarray(W,W+e),r=u.a(t);Je=JSON.parse(r).vertexAttributeExtension}}return{result:!0,groupNode:ie,geoPackage:Z,matrials:me,texturePackage:ge,version:U.S3M4,dataVersion:q,volImageBuffer:I,volBounds:v,vertexAttrExtensions:Je}}function Jt(){(a.e(Fe)||"undefined"==typeof WebAssembly)&&a.e(me)&&(a.e(Fe)&&(Fe.onRuntimeInitialized=function(){Ie=!0}),self.onmessage=L(Yt),self.postMessage(!0))}return function(t){var r=t.data.webAssemblyConfig;if(a.e(r))return n.s.isInternetExplorer()?e([A.n$1("ThirdParty/Workers/ie-webworker-promise-polyfill.js")],(function(t){return self.Promise=t,-1!==r.modulePath.indexOf("crunch")?e([r.modulePath],(function(e){a.e(r.wasmBinaryFile)?(a.e(e)||(e=self.Module),Fe=e,Jt()):(Fe=e,Jt())})):e([r.modulePath],(function(e){a.e(r.wasmBinaryFile)?(a.e(e)||(e=self.DracoDecoderModule),e(r).then((function(e){me=e,Jt()}))):(me=e(),Jt())}))})):-1!==r.modulePath.indexOf("crunch")?e([r.modulePath],(function(e){a.e(r.wasmBinaryFile)?(a.e(e)||(e=self.Module),Fe=e,Jt()):(Fe=e,Jt())})):e([r.modulePath],(function(e){a.e(r.wasmBinaryFile)?(a.e(e)||(e=self.DracoDecoderModule),e(r).then((function(e){me=e,Jt()}))):(me=e(),Jt())}))}}));
